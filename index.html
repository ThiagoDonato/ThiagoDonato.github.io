<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Permutation Visualizer</title>
    <!-- Load Plotly for charting -->
    <script src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>
    <!-- Link to CSS -->
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <h1>Permutation Visualizer V3</h1>
  
    <details class="info-section">
        <summary>What is this? (Click to expand)</summary>
        <div>
            <p>This tool lets you explore permutations visually. For a given permutation π of length n, the x-axis represents the index of the permutation (0 to n-1), and the y-axis represents the value at that index (π[index]).</p>
            <p>It counts all "2413" patterns: sets of four indices i &lt; j &lt; k &lt; l such that π[i] &lt; π[k] &lt; π[l] &lt; π[j], matching the relative order of (2, 4, 1, 3).</p>
            <p>For example, in the permutation <b>2,4,5,1,3</b>, the subsequence <b>(2, 4, 1, 3)</b> forms a "2413" pattern. The subsequence <b>(2, 5, 1, 3)</b> is another one. This permutation has 2 "2413" patterns.</p>
            
            <h3>How to use it</h3>
            <ul>
                <li><b>Manual Swapping:</b> Simply click on any two points in the graph. They will swap places, and the tool will instantly update the count of 2413 patterns.</li>
                <li><b>Optimizer Mode:</b>
                    <ol>
                        <li>Toggle "Optimizer Mode" on. The button will show "ON".</li>
                        <li>Click on any number of points you want to re-order. They will turn green.</li>
                        <li>Click "Apply Optimizer". The tool will arrange the selected values into a pre-computed optimal order that aims to maximize the number of 2413 patterns they can form.</li>
                        <li>Try to find out the optimal permutation for a length 8 permutation. To get the solution simply graph (1,2,3...,8) and apply the optimizer</li>
                    </ol>
                </li>
            </ul>
        </div>
    </details>

    <div>
        <input id="permInput" value="27, 29, 32, 26, 31, 25, 28, 30, 35, 34, 37, 40, 39, 42, 44, 46, 49, 48, 52, 54, 56, 58, 61, 63, 66, 94, 96, 99, 93, 98, 92, 95, 97, 24, 90, 91, 23, 89, 22, 87, 88, 21, 86, 20, 85, 19, 84, 18, 82, 83, 16, 17, 81, 15, 80, 14, 79, 13, 78, 11, 12, 77, 10, 76, 8, 9, 75, 2, 4, 7, 1, 6, 0, 3, 5, 33, 36, 38, 41, 43, 45, 47, 51, 50, 53, 55, 57, 60, 59, 62, 65, 64, 69, 71, 74, 68, 73, 67, 70, 72" placeholder="Enter permutation (comma-separated)" />
        <button id="plotBtn">Plot</button>
        <button id="toggleOptimizerMode">Optimizer Mode: OFF</button>
        <button id="applyOptimizer" disabled>Apply Optimizer</button>
        <button id="copyPermBtn">Copy Permutation</button>
    </div>
  
    <div id="chart"></div>
  
    <p>2413 Count: <span id="countOutput">0</span></p>
    <p>Type 1: <span id="type1Output">0</span></p>
    <p>Type 2: <span id="type2Output">0</span></p>
    <p>Type 3: <span id="type3Output">0</span></p>

  
    <!-- Link to our JavaScript -->
    <script type="module" src="main.js"></script>
    <script type="module" src="fitness.js"></script>
    <script type="module" src="countingTypes.js"></script>
    <script type="module" src="optimizer.js"></script>

  </body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Permutation Visualizer</title>
    <!-- Load Plotly for charting -->
    <script src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>
    <!-- Link to CSS -->
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <h1>Permutation Visualizer V3</h1>
  
    <details class="info-section">
        <summary>What is this? (Click to expand)</summary>
        <div>
            <p>This tool lets you explore permutations visually. Each dot shows a number in the permutation—x-axis is the value, y-axis is the position.</p>
            <p>It counts all "2413" patterns: sets of four indices i &lt; j &lt; k &lt; l such that π[i] &lt; π[k] &lt; π[l] &lt; π[j], matching the relative order of (2, 4, 1, 3).</p>
            <p>For example, in the permutation <b>2,4,5,1,3</b>, the subsequence <b>(2, 4, 1, 3)</b> forms a "2413" pattern. The subsequence <b>(2, 5, 1, 3)</b> is another one. This tool found 2 such patterns.</p>
            
            <h3>How to use it</h3>
            <ul>
                <li><b>Manual Swapping:</b> Simply click on any two points in the graph. They will swap places, and the tool will instantly update the count of 2413 patterns.</li>
                <li><b>Optimizer Mode:</b>
                    <ol>
                        <li>Toggle "Optimizer Mode" on. The button will show "ON".</li>
                        <li>Click on any number of points you want to re-order. They will turn green.</li>
                        <li>Click "Apply Optimizer". The tool will arrange the selected values into a pre-computed optimal order that aims to maximize the number of 2413 patterns they can form.</li>
                    </ol>
                </li>
            </ul>
        </div>
    </details>

    <div>
        <input id="permInput" value="2,4,5,1,3" placeholder="Enter permutation (comma-separated)" />
        <button id="plotBtn">Plot</button>
        <button id="toggleOptimizerMode">Optimizer Mode: OFF</button>
        <button id="applyOptimizer" disabled>Apply Optimizer</button>
        <button id="copyPermBtn">Copy Permutation</button>
    </div>
  
    <div id="chart"></div>
  
    <p>2413 Count: <span id="countOutput">0</span></p>
    <p>Type 1: <span id="type1Output">0</span></p>
    <p>Type 2: <span id="type2Output">0</span></p>
    <p>Type 3: <span id="type3Output">0</span></p>

  
    <!-- Link to our JavaScript -->
    <script type="module" src="main.js"></script>
    <script type="module" src="fitness.js"></script>
    <script type="module" src="countingTypes.js"></script>
    <script type="module" src="optimizer.js"></script>

  </body>
</html>